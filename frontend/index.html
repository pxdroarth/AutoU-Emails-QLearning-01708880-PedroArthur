<!DOCTYPE html>
<!--
Nome do arquivo: index.html
Data de criação: 17/09/2025
Autor: Pedro Arthur Maia Damasceno
Matrícula: 01708880

Descrição:
Página principal do frontend do AutoU — Classificador & Auto-Responder.
Fornece UI para colar/selecionar e-mails, acionar classificação, enviar feedback humano,
disparar treino e visualizar métricas.

Funcionalidades:
- Entrada de texto e upload de arquivo (.txt, .pdf, .eml)
- Ação de "Processar" para classificar via API
- Exibição de categoria, confiança e resposta sugerida
- Fluxo de feedback (correto/errado) com correção de classe
- Botões para treinar o agente e consultar métricas
- Toast simples para feedback visual
-->

<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>AutoU — Classificador de Emails</title>
  <link rel="stylesheet" href="./styles.css"/>
  <link rel="icon" href="./favicon.ico">
</head>
<body>
  <main class="container">
    <h1>
      AutoU — Classificador & Auto-Responder
      <span id="originTitle" class="muted"></span>
    </h1>
    

    <section class="card">
      <label for="emailText">Colar texto do email</label>
      <textarea id="emailText" rows="8" placeholder="Cole aqui o conteúdo do email..."></textarea>

      <div class="row">
        <div>
          <label for="emailFile">Ou enviar arquivo (.txt, .pdf, .eml)</label>
          <input id="emailFile" type="file" accept=".txt,.pdf,.eml"/>
        </div>
        <div class="actions">
          <button id="btnProcessar">Processar</button>
        </div>
      </div>
      <small class="muted">Processamento com fallback inteligente (HF → modelo → heurística).</small>
    </section>

    <section id="result" class="card hidden">
      <h2>Resultado</h2>
      <p>
        <strong>Categoria:</strong>
        <span id="outCategory"></span>
        <span id="originBadge" class="badge">?</span>
      </p>
      <p><strong>Confiança:</strong> <span id="outConfidence"></span></p>
      <label for="outReply">Resposta sugerida</label>
      <textarea id="outReply" rows="6" readonly></textarea>
      <button id="btnCopiar">Copiar resposta</button>
    </section>

   <!-- Revisão manual (feedback humano) -->
<section id="feedback-section" class="card hidden">
  <h2>Revisão manual</h2>
  <p>Essa classificação está correta?</p>

  <div class="feedback-actions">
    <button id="btnCorreto" class="btn ok">Correto</button>
    <button id="btnErrado" class="btn err">Errado</button>
    <div id="correcao-wrap" class="hidden">
      <select id="selectCorrecao" class="select">
        <option value="">Corrigir para...</option>
        <option value="produtivo">Produtivo</option>
        <option value="improdutivo">Improdutivo</option>
      </select>
      <button id="btnEnviarCorrecao" class="btn warn">Enviar correção</button>
    </div>
  </div>

  <div class="feedback-train">
    <button id="btnTreinar" class="btn">Treinar agora</button>
    <button id="btnVerMetricas" class="btn">Ver métricas</button>
  </div>

  <pre id="metricasBox" class="metrics hidden"></pre>
</section>

<!-- Toast simples -->
<div id="toast" class="toast hidden"></div>

    <footer class="muted center">Feito por Pedro Arthur — Case Prático PROVA do CHICO</footer>
    
  </main>

   <!-- Render injeta esta variável a partir da env API_BASE (opcional) -->
  <script>window.API_BASE = "http://127.0.0.1:8000";</script>

  <!-- Carregue primeiro a config, depois o app -->
  <script src="./config.js?v=6"></script>
  <script src="./app.js?v=6"></script>

</body>
</html>
